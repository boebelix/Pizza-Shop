version: '3.0'

services:
    db-user:
        container_name: userManagementDB
        image: ateam/userdb:latest
        volumes:
            -   type: "volume"
                source: usermanagement-db-data
                target: /var/lib/mysql
                volume:
                    nocopy: true
        ports:
            -   3306:3306
        environment:
            - MYSQL_DATABASE=usermanagement
            - MYSQL_ALLOW_EMPTY_PASSWORD=true
    db-pizza:
        container_name: pizzaShopDB
        build:
            context: ./apps/pizzaShop/db
            dockerfile: Dockerfile
        volumes:
            -   type: "volume"
                source: pizzashop-db-data
                target: /var/lib/mysql
                volume:
                    nocopy: true
        ports:
            -   3307:3306
        environment:
            - MYSQL_DATABASE=pizzashop
            - MYSQL_ALLOW_EMPTY_PASSWORD=true


volumes:
    usermanagement-db-data:
    pizzashop-db-data:
